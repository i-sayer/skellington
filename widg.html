<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Widget Test</title>
    <style>
        body {
            font-family: "Segoe UI", Candara, "Bitstream Vera Sans", "DejaVu Sans", "Trebuchet MS", Verdana, sans-serif;
            background-color: #e6dcd6;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAXCAMAAABDEo1gAAAALVBMVEXu7u7z8/Pt7e3r6+vv7+/x8fHs7Ozw8PDo6Ojq6urp6eny8vL09PT19fX29vbJGhcbAAAB5klEQVR42k2TW4IkIQgEUUQLofb+x91At2b2x1eFaZJ0i7TWdTQTnastfaa1ob4lQraPlmtvy5z7nGvR7h5vyjMDfjOKF+2lYk1UlnjRiAh0X12SeTR4Lx2D1s48Z9Rjl0ZEZGvL0HloWZyin4mTzOz76Y31R6dwN7LJ3tCd8/LTGV0zl47pnScv3eBiYIa3cdt1+uWn1TGu6wH4S8cIobBaYrtT97r8o+htaj843KFld+EuG0ZE4+WrkufNba6Tr/3QruKH58VAxzImfHIX6qsD+gQrNmRCVlbF06kw+JapeyT0l0m1i+aEmBZvgoB115PPCPO5PnpDR4vpqyXVoZxv872K1Bq1/5eQznKyiu/GDE+SBR5+ROj+6BxYq0b5oKxnivIBAYdekHL8yEc3eXh6eVeOTR9BNdCHZpTMUB/RLo1lmy4LO2UdXvQE3W/Yau/bH/noMZHsvjUqqt7SxHBkR06XyVzMv5ncpPRkiusgGSt9FntmmjrcR1PShDdc0BLD2BLWuBhR1zPHvyKKdjKx0+PjIA1XgrJd/1OF/taCYqHJ7g3Xo6fQqh3cWbHHwukv9LPaCy2sjxnUjjaD+DPy8OvyydcK4v4Gi65uNuiZf5rgINhdfb9/DLF+aS/6sXjtRiB/AetLF9OdGDz6AAAAAElFTkSuQmCC);
        }
        h1 {
            background-color: #565656;
            color: transparent;
            text-shadow: 0px 2px 3px rgba(255,255,255,0.5);
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            position: fixed;
        }
        .widg {
            position: relative;
            top: 60px;
            left: 90px;
            background-color: royalblue;
            display: inline-block;
            border: 0.5px solid currentColor;
            min-height: 3em;
            min-width: 300px;
            background-color: rgb(225, 229, 232);
            box-shadow: rgb(51, 51, 51) 0px 1px 4px;
            box-sizing: border-box;
            user-select: none;
            overflow: hidden;
        }
        .widg::before {
            content:"";
            position: absolute;
            background-color: rgba(0,0,50,0);
            left: 0; right: 0;
            top: 0; bottom: 0;
            clip-path: polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%, calc(100% - 5px) 0%, calc(100% - 5px) calc(100% - 5px), 5px calc(100% - 5px), 5px 0%);
            /* cursor: crosshair; */
            transition: background-color 0.3s ease-in;
        }
        .widg:hover::before {
            background-color: rgba(0,0,50,0.16);
        }
        .widg>h3{
            margin: 1px;
            padding: 3px;
            background: linear-gradient(rgb(255, 255, 255), rgb(204, 204, 204));
        }
        .widg>p {
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>Widget Test Box</h1>
    <div id="test1" class="widg">
        <h3>Test Window</h3>
        <p><label for="">Input Name:<input id="ttp" type="text"></label></p>
    </div>
    <script>
        test1.addEventListener("mousedown",_w_mousedownover);
        test1.addEventListener("mouseover",_w_mousedownover);
        test1.addEventListener("mouseout",function(e){
            if (!window.adjustWidg)
                document.body.style.cursor = "unset";
        });
        function $top(e) {
            // adjust top edge
            if (e.type=="mouseover")
                return document.body.style.cursor = "ns-resize";
            var ow = window.adjustWidg;
            var delta = e.clientY - ow.startY;
            if (delta) {
                ow.style.height = (ow.offsetHeight - delta) + "px";
                ow.style.top = (e.clientY) + "px";
            }
            ow.startY = e.clientY;
        }
        function $topRight(e) {
            // adjust top-right corner
            if (e.type=="mouseover")
                return document.body.style.cursor = "nesw-resize";
            $top(e);
            $right(e);
        }
        function $right(e) {
            // adjust right edge
            if (e.type=="mouseover")
                return document.body.style.cursor = "ew-resize";
            var ow = window.adjustWidg;
            var delta = e.clientX - ow.startX;
            if (delta)
                ow.style.width = (ow.offsetWidth + delta) + "px";
            ow.startX = e.clientX;
        }
        function $bottomRight(e) {
            // adjust bottom-right corner
            if (e.type=="mouseover")
                return document.body.style.cursor = "nwse-resize";
            $bottom(e);
            $right(e);
        }
        function $bottom(e) {
            // adjust bottom edge
            if (e.type=="mouseover")
                return document.body.style.cursor = "ns-resize";
            var ow = window.adjustWidg;
            var delta = e.clientY - ow.startY;
            if (delta)
                ow.style.height = (ow.offsetHeight + delta) + "px";
            ow.startY = e.clientY;
        }
        function $bottomLeft(e) {
            // adjust bottom-left corner
            if (e.type=="mouseover")
                return document.body.style.cursor = "nesw-resize";
            $bottom(e);
            $left(e);
        }
        function $left(e) {
            // adjust left edge
            if (e.type=="mouseover")
                return document.body.style.cursor = "ew-resize";
            var ow = window.adjustWidg;
            var delta = e.clientX - ow.startX;
            if (delta) {
                ow.style.width = (ow.offsetWidth - delta) + "px";
                ow.style.left = (e.clientX) + "px";
            }
            ow.startX = e.clientX;
        }
        function $topLeft(e) {
            // adjust top-left corner
            if (e.type=="mouseover")
                return document.body.style.cursor = "nwse-resize";
            $top(e);
            $left(e);
        }
        function _w_mousedownover(e){
            let rect = this.getBoundingClientRect();
            // need to detect 1 of 7 zones: top-left, left, bottom-left, bottom, bottom-right, right, top-right
            let bin = [(e.clientY < rect.top + 10),(e.clientX > rect.right - 6),(e.clientY > rect.bottom - 10),(e.clientX < rect.left + 6)]
                .reduce((a,u,i)=>a+((u)?Math.pow(2, i):0));
            let f = {1:$top, 3:$topRight, 2:$right, 6:$bottomRight, 4:$bottom, 12:$bottomLeft, 8:$left, 9:$topLeft}[bin];
            if (f) {
                if (e.type=="mouseover")
                    f(e);
                else {
                    this.startX = e.clientX;
                    this.startY = e.clientY;
                    window.adjustWidg = this;
                    window.addEventListener("mousemove", f);
                    var $done = function(ev){
                        window.removeEventListener("mousemove", f);
                        window.removeEventListener("mouseup", $done);
                        window.adjustWidg = undefined;
                    }
                    window.addEventListener("mouseup", $done);
                }
            } else {
                if (!window.adjustWidg)
                    document.body.style.cursor = "unset";
            }
        }
    </script>
</body>
</html>