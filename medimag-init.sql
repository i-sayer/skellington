CREATE DATABASE [Medimag];
GO

USE [Medimag];
GO

CREATE TABLE [ModalityName](
	[modality] [smallint] NOT NULL,
	[name] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_ModalityName] PRIMARY KEY ([modality])
 );
 GO

CREATE TABLE [dbo].[RoleName](
	[role] [smallint] NOT NULL,
	[name] [nvarchar](50) NOT NULL,
    CONSTRAINT [PK_RoleName] PRIMARY KEY ([role])
);
GO

CREATE TABLE [dbo].[users](
	[upi] [char](8) NOT NULL,
	[role] [smallint] NOT NULL,
	[modality] [smallint] NOT NULL,
    CONSTRAINT [PK_users] PRIMARY KEY ([upi],[role]),
    CONSTRAINT [FK_modality_user] FOREIGN KEY ([modality]) REFERENCES [ModalityName] ([modality]),
    CONSTRAINT [FK_role_user] FOREIGN KEY ([role]) REFERENCES [RoleName] ([role])
 );
GO

CREATE TABLE [dbo].[SupervisorStudent](
	[supervisor] [char](8) NOT NULL,
	[student] [char](8) NOT NULL,
 CONSTRAINT [PK_supervisor_student] PRIMARY KEY ([supervisor],[student])
);
GO

CREATE TABLE [dbo].[FormHeaders](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[FormCode] [int] NOT NULL,
	[DateSubmitted] [datetime] NOT NULL,
	[upi] [char](8) NOT NULL,
	[status] [int] NOT NULL,
    CONSTRAINT [PK_form_header] PRIMARY KEY ([id]),
    CONSTRAINT [FK_form_user] FOREIGN KEY ([upi]) REFERENCES [users] ([upi]),
);
GO

CREATE TABLE [dbo].[FormItems](
	[FormHeaderID] [int] NOT NULL,
	[FieldID] [int] NOT NULL,
	[text] [nvarchar](4000) NULL,
    CONSTRAINT [PK_form_item] PRIMARY KEY ([FormHeaderID],[FieldID]),
    CONSTRAINT [FK_form_header] FOREIGN KEY ([FormCode]) REFERENCES [FormHeaders] ([id]) ON DELETE CASCADE
);
GO

INSERT INTO [ModalityName] (modality,name) VALUES
(1,	'Mammography'),
(2,	'MRI'),
(3,	'Nuclear Medicine'),
(4,	'Ultrasound');
GO

INSERT INTO [RoleName] (role,name) VALUES
(1,	'Assessor'),
(2,	'Student'),
(3,	'Supervisor'),
(4,	'Admin');
GO

INSERT INTO [users] (upi,role,modality) VALUES
('aabb490', 1, 2),
('aben061', 1, 2),
('abyd114', 1, 1),
('acar294', 1, 2),
('acha344', 2, 4),
('acha967', 2, 4),
('aeas374', 2, 4),
('afer577', 1, 4),
('agad113', 2, 1),
('agen274', 2, 4),
('agly479', 2, 4),
('agre600', 2, 4),
('aham703', 3, 2),
('ahar521', 2, 2),
('ahil039', 2, 4),
('ahut885', 1, 2),
('ajon942', 2, 3),
('akel054', 3, 4),
('alam604', 1, 2),
('aliu030', 1, 4),
('amcl471', 3, 4),
('apin728', 1, 2),
('apri731', 2, 1),
('arac881', 2, 1),
('aslo240', 3, 2),
('awhi679', 3, 3),
('awil671', 2, 4),
('ayat911', 3, 2),
('ball822', 3, 3),
('bbet754', 3, 2),
('bfar792', 2, 3),
('bhyl015', 2, 4),
('bmac523', 1, 1),
('bnau044', 1, 1),
('bove835', 1, 3),
('bpag159', 3, 3),
('bpla537', 2, 2),
('bpon004', 2, 1),
('bsme454', 1, 1),
('bspa632', 3, 4),
('btic559', 1, 1),
('bupt278', 3, 2),
('bwar054', 1, 4),
('bwil564', 1, 1),
('cbag007', 3, 4),
('cbai056', 2, 4),
('cbes536', 3, 2),
('cbir730', 3, 4),
('cbuc266', 2, 2),
('cbur099', 1, 3),
('cbur278', 2, 2),
('ccha536', 2, 4),
('cdav466', 1, 4),
('ceag181', 3, 2),
('ceva436', 3, 3),
('cfer385', 1, 1),
('cgre090', 3, 4),
('char572', 1, 1),
('chea239', 1, 2),
('chir004', 1, 4),
('chod032', 2, 2),
('chol960', 1, 2),
('cman949', 2, 4),
('cmck859', 3, 3),
('cmck969', 1, 2),
('cmcl069', 2, 2),
('cmor588', 3, 4),
('cmun178', 1, 1),
('cpra476', 2, 1),
('croo648', 3, 3),
('csmi882', 1, 4),
('ctru004', 1, 4),
('cvos176', 2, 1),
('cwan903', 2, 4),
('dbur508', 3, 4),
('ddep002', 1, 2),
('ddom004', 2, 4),
('ddys963', 2, 4),
('dfra807', 3, 2),
('dhuc968', 1, 3),
('dhun246', 1, 2),
('dker582', 3, 2),
('dlaw055', 2, 4),
('dmul025', 3, 2),
('dnew539', 3, 3),
('dsav013', 1, 4),
('dtan062', 1, 4),
('dwil305', 3, 2),
('dwil306', 3, 2),
('ebok058', 3, 2),
('ehas539', 1, 2),
('ekea731', 1, 2),
('ekru094', 1, 2),
('elee661', 1, 2),
('emax084', 2, 4),
('emcp283', 2, 4),
('emor060', 2, 4),
('enic027', 2, 1),
('epol008', 2, 4),
('etil595', 1, 1),
('fbai502', 1, 4),
('fbur911', 2, 2),
('fdav706', 1, 1),
('foko182', 3, 1),
('gand656', 1, 2),
('gavi170', 2, 2),
('gdou274', 1, 4),
('gedg182', 1, 4),
('glee731', 1, 2),
('gmac107', 2, 4),
('gpas261', 3, 4),
('gpot601', 1, 2),
('hand522', 2, 2),
('haus455', 2, 1),
('hbow002', 1, 1),
('hbro267', 1, 2),
('hbut676', 2, 2),
('hcro320', 2, 4),
('hcut074', 3, 2),
('hfin848', 2, 2),
('hfro011', 2, 4),
('hgun008', 4, 0),
('hham025', 2, 4),
('hhil335', 2, 3),
('hmat707', 3, 2),
('hmey922', 2, 4),
('hroe032', 2, 4),
('hroe807', 2, 4),
('hsha298', 3, 1),
('hsha485', 2, 4),
('hsim772', 4, 0),
('htho274', 2, 4),
('hwal929', 3, 4),
('isay999', 2, 4),
('jadl962', 1, 2),
('jbri129', 1, 2),
('jcam945', 1, 2),
('jcla445', 1, 2),
('jcor182', 3, 2),
('jdun550', 1, 2),
('jfev252', 3, 2),
('jfou866', 1, 1),
('jhas539', 1, 3),
('jhay402', 1, 1),
('jhay801', 2, 2),
('jhut534', 3, 2),
('jkea008', 1, 1),
('jkel315', 1, 4),
('jkim118', 2, 4),
('jmaf082', 1, 1),
('jmas507', 1, 2),
('jmcc247', 3, 2),
('jmcn494', 1, 2),
('jmet003', 1, 4),
('jmey206', 1, 1),
('jmut637', 1, 1),
('joli179', 1, 2),
('josb863', 3, 2),
('jpas969', 2, 4),
('jpru929', 1, 1),
('jpuk718', 2, 2),
('jrob735', 2, 2),
('jroe245', 3, 4),
('jrow044', 2, 2),
('jrow044', 3, 1),
('jrus071', 3, 4),
('jsto599', 2, 4),
('jtee383', 1, 4),
('jwag998', 1, 4),
('jwal358', 1, 2),
('jwhi255', 3, 2),
('jwoo098', 3, 4),
('kada789', 3, 1),
('kale780', 1, 2),
('kand122', 3, 2),
('kang729', 2, 2),
('kbar515', 1, 2),
('kbee974', 2, 2),
('kbou017', 2, 2),
('kbre815', 1, 4),
('kcam418', 3, 2),
('kcar495', 1, 4),
('kchi906', 3, 4),
('kgor633', 1, 2),
('kham547', 3, 3),
('khen955', 1, 2),
('khum323', 3, 2),
('kker132', 1, 2),
('kluc504', 3, 4),
('klyn914', 2, 4),
('kmat190', 2, 2),
('kmoo200', 1, 1),
('ksou121', 1, 3),
('ktem006', 1, 2),
('kwal076', 4, 0),
('kwik110', 1, 3),
('kwor753', 3, 3),
('lald564', 1, 1),
('lall668', 3, 1),
('larz643', 2, 1),
('lben790', 1, 1),
('lbul735', 1, 2),
('lbur899', 2, 4),
('lche200', 2, 2),
('lcol697', 1, 4),
('lcot578', 1, 1),
('ldun244', 3, 4),
('lgar072', 1, 1),
('llai045', 1, 1),
('llaw743', 1, 1),
('lmit629', 1, 2),
('lrus971', 1, 4),
('ltar122', 3, 4),
('ltow355', 3, 2),
('lvan955', 2, 2),
('lwil749', 2, 2),
('lwoo894', 3, 2),
('marc916', 1, 2),
('mbal460', 1, 4),
('mbat220', 2, 2),
('mbay418', 1, 2),
('mbot007', 2, 2),
('mdav422', 1, 2),
('mdib194', 1, 2),
('meng063', 2, 4),
('mgla617', 3, 4),
('mgra433', 2, 2),
('mgro740', 3, 1),
('mhar495', 2, 4),
('mhas069', 2, 3),
('mhaw396', 2, 1),
('mhow418', 1, 3),
('mkil997', 1, 1),
('mlin720', 2, 1),
('mmcd005', 1, 4),
('mmor410', 1, 2),
('mnec002', 3, 4),
('mnel011', 3, 2),
('morc093', 1, 4),
('mrab234', 3, 1),
('msaa009', 2, 4),
('msne303', 2, 2),
('mtip674', 2, 2),
('nalk005', 3, 2),
('nall538', 3, 2),
('narn678', 1, 2),
('ncha841', 2, 2),
('ncla131', 1, 1),
('ndav945', 3, 2),
('nkum034', 1, 4),
('nlaw043', 1, 1),
('npal998', 1, 2),
('nras010', 1, 4),
('nshi099', 2, 2),
('nwin712', 1, 2),
('nzuh811', 2, 2),
('pboe354', 1, 4),
('pbur744', 3, 3),
('pcha999', 3, 1),
('plam219', 3, 3),
('pmea015', 3, 3),
('pmur618', 1, 2),
('pnel226', 1, 2),
('psol036', 3, 1),
('ptay266', 3, 2),
('pwal959', 3, 2),
('ralo673', 1, 4),
('rbar540', 1, 4),
('rbar645', 2, 3),
('rbud282', 2, 2),
('rche201', 1, 2),
('rcla127', 2, 4),
('rcur582', 1, 1),
('rdav340', 3, 1),
('rgib040', 2, 1),
('rgri483', 3, 1),
('rhes772', 2, 4),
('rjen663', 3, 2),
('rjes736', 2, 2),
('rjoh100', 1, 2),
('rmey682', 2, 2),
('rnel858', 1, 4),
('rorb616', 2, 3),
('rpow998', 3, 4),
('rswe480', 4, 0),
('rtay635', 1, 2),
('rtho806', 2, 1),
('rwel920', 3, 2),
('rwhi873', 3, 4),
('sbak984', 2, 4),
('sbos276', 2, 2),
('sboy377', 1, 2),
('sbut528', 1, 2),
('scol258', 3, 2),
('scri312', 1, 2),
('sdiv444', 2, 4),
('sdol990', 2, 3),
('sdon031', 4, 0),
('sfel407', 1, 2),
('sgat638', 1, 1),
('sgue662', 2, 2),
('shad646', 1, 1),
('shys667', 1, 4),
('sjob591', 2, 2),
('sjon616', 1, 2),
('sjon930', 1, 1),
('sjoy108', 3, 1),
('skwa189', 1, 1),
('sllo778', 3, 4),
('slyn177', 3, 2),
('smac256', 1, 2),
('smai208', 1, 1),
('smar547', 1, 4),
('smax671', 1, 2),
('smcc347', 2, 2),
('smil072', 1, 4),
('smoo356', 3, 4),
('spar285', 2, 3),
('sper123', 2, 4),
('spov889', 2, 2),
('sste438', 2, 2),
('ssum263', 2, 2),
('ssut523', 2, 1),
('ssut960', 1, 1),
('stho279', 2, 1),
('sver244', 1, 4),
('swat107', 1, 4),
('swat174', 2, 4),
('swin030', 1, 2),
('tcro188', 2, 2),
('tdix009', 1, 4),
('tmcc650', 1, 4),
('tmit596', 3, 2),
('tpea492', 1, 4),
('tphi031', 3, 4),
('tril005', 1, 4),
('trut654', 2, 4),
('ubha005', 2, 4),
('umay475', 2, 4),
('vami810', 1, 4),
('vdaw768', 1, 4),
('vgal269', 1, 4),
('vsan209', 1, 4),
('wcol029', 3, 4),
('wfre086', 2, 3),
('who208',  2, 1),
('wrow473', 1, 4),
('wsty212', 1, 3),
('wwag431', 1, 4),
('xlin103', 2, 4),
('xliu842', 2, 4),
('ybir855', 1, 2),
('ycla655', 1, 1),
('yren010', 1, 3),
('yzou877', 1, 4),
('zbro488', 1, 2),
('zshe010', 1, 1);
GO
